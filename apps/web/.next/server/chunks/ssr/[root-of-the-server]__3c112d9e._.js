module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},97376,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87476,(a,b,c)=>{"use strict";b.exports=a.r(97376).vendored["react-ssr"].ReactJsxRuntime},74966,(a,b,c)=>{"use strict";b.exports=a.r(97376).vendored["react-ssr"].React},82915,18124,a=>{"use strict";var b=a.i(87476),c=a.i(74966);let d=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",e=new class{accessToken=null;refreshToken=null;setTokens(a,b){this.accessToken=a,this.refreshToken=b}clearTokens(){this.accessToken=null,this.refreshToken=null}getAccessToken(){return this.accessToken}async request(a,b={}){let{method:c="GET",body:e,headers:f={},auth:g=!0}=b,h={"Content-Type":"application/json",...f};g&&this.accessToken&&(h.Authorization=`Bearer ${this.accessToken}`);try{let f=await fetch(`${d}${a}`,{method:c,headers:h,body:e?JSON.stringify(e):void 0}),i=await f.json();if(!f.ok&&401===f.status&&this.refreshToken&&g&&await this.tryRefreshToken())return this.request(a,b);return i}catch(a){return{success:!1,error:{code:"NETWORK_ERROR",message:a instanceof Error?a.message:"Network error occurred"}}}}async tryRefreshToken(){if(!this.refreshToken)return!1;try{let a=await fetch(`${d}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.accessToken}`},body:JSON.stringify({refreshToken:this.refreshToken})});if(!a.ok)return this.clearTokens(),!1;let b=await a.json();if(b.success&&b.data?.tokens)return this.setTokens(b.data.tokens.accessToken,b.data.tokens.refreshToken),!0;return this.clearTokens(),!1}catch{return this.clearTokens(),!1}}async login(a,b){return this.request("/auth/login",{method:"POST",body:{email:a,password:b},auth:!1})}async register(a,b,c){return this.request("/auth/register",{method:"POST",body:{email:a,name:b,password:c},auth:!1})}async googleAuth(a){return this.request("/auth/google",{method:"POST",body:{credential:a},auth:!1})}async getGoogleConfig(){return this.request("/auth/google/config",{method:"GET",auth:!1})}async logout(){this.refreshToken&&(await this.request("/auth/logout",{method:"POST",body:{refreshToken:this.refreshToken}}),this.clearTokens())}async getMe(){return this.request("/auth/me")}async scrape(a){return this.request("/v1/scrape",{method:"POST",body:a})}async getJob(a){return this.request(`/v1/jobs/${a}`)}async listJobs(a=1,b=20){return this.request(`/v1/jobs?page=${a}&limit=${b}`)}async listApiKeys(){return this.request("/api-keys")}async createApiKey(a,b){return this.request("/api-keys",{method:"POST",body:{name:a,permissions:b}})}async deleteApiKey(a){return this.request(`/api-keys/${a}`,{method:"DELETE"})}async getUsage(a,b){let c=new URLSearchParams;return a&&c.set("startDate",a),b&&c.set("endDate",b),this.request(`/v1/usage?${c.toString()}`)}};a.s(["apiClient",0,e],18124);let f=c.createContext(void 0);function g({children:a}){let[d,g]=c.useState(null),[h,i]=c.useState(!0),j=!!d,k=c.useCallback(async()=>{if(!e.getAccessToken()){g(null),i(!1);return}try{let a=await e.getMe();a.success&&a.data?.user?g(a.data.user):(g(null),e.clearTokens())}catch{g(null),e.clearTokens()}finally{i(!1)}},[]);c.useEffect(()=>{k()},[k]);let l=c.useCallback(async(a,b)=>{let c=await e.login(a,b);return c.success&&c.data?(e.setTokens(c.data.tokens.accessToken,c.data.tokens.refreshToken),g(c.data.user),{success:!0}):{success:!1,error:c.error?.message||"Login failed"}},[]),m=c.useCallback(async(a,b,c)=>{let d=await e.register(a,b,c);return d.success&&d.data?(e.setTokens(d.data.tokens.accessToken,d.data.tokens.refreshToken),g(d.data.user),{success:!0}):{success:!1,error:d.error?.message||"Registration failed"}},[]),n=c.useCallback(async a=>{let b=await e.googleAuth(a);return b.success&&b.data?(e.setTokens(b.data.tokens.accessToken,b.data.tokens.refreshToken),g(b.data.user),{success:!0}):{success:!1,error:b.error?.message||"Google login failed"}},[]),o=c.useCallback(async()=>{await e.logout(),g(null)},[]),p=c.useMemo(()=>({user:d,isLoading:h,isAuthenticated:j,login:l,register:m,googleLogin:n,logout:o,refreshUser:k}),[d,h,j,l,m,n,o,k]);return(0,b.jsx)(f.Provider,{value:p,children:a})}function h(){let a=c.useContext(f);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}a.s(["AuthProvider",()=>g,"useAuth",()=>h],82915)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3c112d9e._.js.map