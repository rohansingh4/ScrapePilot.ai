{"version":3,"sources":["../../../../../../node_modules/.bun/next%4016.1.1%2Bdf4bf79bce1f90fc/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../node_modules/.bun/next%4016.1.1%2Bdf4bf79bce1f90fc/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../node_modules/.bun/next%4016.1.1%2Bdf4bf79bce1f90fc/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../node_modules/.bun/next%4016.1.1%2Bdf4bf79bce1f90fc/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../../apps/web/src/components/ui/input.tsx","../../../../../../apps/web/src/components/ui/label.tsx","../../../../../../apps/web/src/app/%28auth%29/login/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {\n  icon?: React.ReactNode;\n}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, icon, ...props }, ref) => {\n    return (\n      <div className=\"relative flex items-center\">\n        {icon && (\n          <div className=\"absolute left-3 text-[var(--muted-foreground)]\">\n            {icon}\n          </div>\n        )}\n        <input\n          type={type}\n          className={cn(\n            \"flex h-11 w-full rounded-lg border border-[var(--border)] bg-[var(--card)] px-4 py-2 text-sm text-[var(--foreground)] placeholder:text-[var(--muted-foreground)] transition-colors focus:border-[var(--primary)] focus:outline-none focus:ring-1 focus:ring-[var(--primary)] disabled:cursor-not-allowed disabled:opacity-50\",\n            icon && \"pl-10\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        />\n      </div>\n    );\n  }\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n","\"use client\";\n\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface LabelProps extends React.LabelHTMLAttributes<HTMLLabelElement> {}\n\nconst Label = React.forwardRef<HTMLLabelElement, LabelProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <label\n        ref={ref}\n        className={cn(\n          \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\",\n          className\n        )}\n        {...props}\n      />\n    );\n  }\n);\n\nLabel.displayName = \"Label\";\n\nexport { Label };\n","\"use client\";\n\nimport * as React from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"@/contexts/auth-context\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\n\ndeclare global {\n  interface Window {\n    google?: {\n      accounts: {\n        id: {\n          initialize: (config: {\n            client_id: string;\n            callback: (response: { credential: string }) => void;\n          }) => void;\n          prompt: () => void;\n        };\n      };\n    };\n  }\n}\n\nexport default function LoginPage() {\n  const router = useRouter();\n  const { login, googleLogin, isAuthenticated, isLoading } = useAuth();\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const [error, setError] = React.useState(\"\");\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\n  const [googleClientId, setGoogleClientId] = React.useState<string | null>(null);\n  const [isGoogleLoading, setIsGoogleLoading] = React.useState(false);\n  const [googleScriptLoaded, setGoogleScriptLoaded] = React.useState(false);\n\n  // Redirect if already authenticated\n  React.useEffect(() => {\n    if (!isLoading && isAuthenticated) {\n      router.push(\"/dashboard\");\n    }\n  }, [isAuthenticated, isLoading, router]);\n\n  // Load Google OAuth config\n  React.useEffect(() => {\n    async function loadGoogleConfig() {\n      try {\n        const response = await fetch(\n          `${process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3001\"}/auth/google/config`\n        );\n        const data = await response.json() as { success: boolean; data: { clientId: string | null; enabled: boolean } };\n        if (data.success && data.data?.clientId) {\n          setGoogleClientId(data.data.clientId);\n        }\n      } catch {\n        // Google OAuth not configured\n      }\n    }\n    loadGoogleConfig();\n  }, []);\n\n  // Load Google Sign-In script\n  React.useEffect(() => {\n    if (!googleClientId) return;\n\n    const script = document.createElement(\"script\");\n    script.src = \"https://accounts.google.com/gsi/client\";\n    script.async = true;\n    script.defer = true;\n    script.onload = () => {\n      setGoogleScriptLoaded(true);\n      window.google?.accounts.id.initialize({\n        client_id: googleClientId,\n        callback: handleGoogleCallback,\n      });\n    };\n    document.body.appendChild(script);\n\n    return () => {\n      if (document.body.contains(script)) {\n        document.body.removeChild(script);\n      }\n    };\n  }, [googleClientId]);\n\n  const handleGoogleCallback = async (response: { credential: string }) => {\n    setIsGoogleLoading(true);\n    setError(\"\");\n    const result = await googleLogin(response.credential);\n    if (result.success) {\n      router.push(\"/dashboard\");\n    } else {\n      setError(result.error || \"Google login failed\");\n    }\n    setIsGoogleLoading(false);\n  };\n\n  const handleGoogleClick = () => {\n    if (!googleClientId) {\n      setError(\"Google Sign-In is not configured. Please contact support or use email/password.\");\n      return;\n    }\n    if (googleScriptLoaded && window.google) {\n      setIsGoogleLoading(true);\n      window.google.accounts.id.prompt();\n      // Reset loading state after a delay in case user cancels\n      setTimeout(() => setIsGoogleLoading(false), 5000);\n    } else {\n      setError(\"Google Sign-In is loading. Please try again.\");\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setError(\"\");\n\n    const result = await login(email, password);\n    if (result.success) {\n      router.push(\"/dashboard\");\n    } else {\n      setError(result.error || \"Login failed\");\n    }\n    setIsSubmitting(false);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex min-h-screen items-center justify-center bg-[var(--background)] px-4\">\n      <div className=\"w-full max-w-md space-y-8\">\n        <div className=\"text-center\">\n          <Link href=\"/\" className=\"inline-flex items-center gap-2 text-2xl font-bold\">\n            <span className=\"text-3xl\">S</span>\n            <span>ScrapePilot</span>\n          </Link>\n          <h2 className=\"mt-6 text-3xl font-bold tracking-tight\">\n            Welcome back\n          </h2>\n          <p className=\"mt-2 text-sm text-[var(--muted-foreground)]\">\n            Sign in to your account to continue\n          </p>\n        </div>\n\n        <div className=\"mt-8 space-y-6\">\n          {error && (\n            <div className=\"rounded-md bg-red-500/10 border border-red-500/20 p-4 text-sm text-red-500\">\n              {error}\n            </div>\n          )}\n\n          {/* Google Sign-In Button */}\n          <button\n            type=\"button\"\n            onClick={handleGoogleClick}\n            disabled={isGoogleLoading || isSubmitting}\n            className=\"w-full flex items-center justify-center gap-3 px-4 py-3 border border-[var(--border)] rounded-lg bg-white text-gray-900 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z\" fill=\"#4285F4\"/>\n              <path d=\"M9.003 18c2.43 0 4.467-.806 5.956-2.18l-2.909-2.26c-.806.54-1.836.86-3.047.86-2.344 0-4.328-1.584-5.036-3.711H.96v2.332C2.44 15.983 5.485 18 9.003 18z\" fill=\"#34A853\"/>\n              <path d=\"M3.964 10.712c-.18-.54-.282-1.117-.282-1.71 0-.593.102-1.17.282-1.71V4.96H.957C.347 6.175 0 7.55 0 9.002c0 1.452.348 2.827.957 4.042l3.007-2.332z\" fill=\"#FBBC05\"/>\n              <path d=\"M9.003 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.464.891 11.428 0 9.002 0 5.485 0 2.44 2.017.96 4.958L3.967 7.29c.708-2.127 2.692-3.71 5.036-3.71z\" fill=\"#EA4335\"/>\n            </svg>\n            {isGoogleLoading ? \"Signing in...\" : \"Continue with Google\"}\n          </button>\n\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 flex items-center\">\n              <span className=\"w-full border-t border-[var(--border)]\" />\n            </div>\n            <div className=\"relative flex justify-center text-xs uppercase\">\n              <span className=\"bg-[var(--background)] px-2 text-[var(--muted-foreground)]\">\n                Or continue with email\n              </span>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"you@example.com\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                disabled={isSubmitting}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <Label htmlFor=\"password\">Password</Label>\n                <Link\n                  href=\"/forgot-password\"\n                  className=\"text-sm text-pink-500 hover:text-pink-400\"\n                >\n                  Forgot password?\n                </Link>\n              </div>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"••••••••\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n                disabled={isSubmitting}\n              />\n            </div>\n\n            <Button\n              type=\"submit\"\n              className=\"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700\"\n              disabled={isSubmitting}\n            >\n              {isSubmitting ? \"Signing in...\" : \"Sign in\"}\n            </Button>\n          </form>\n\n          <p className=\"text-center text-sm text-[var(--muted-foreground)]\">\n            Don&apos;t have an account?{\" \"}\n            <Link href=\"/register\" className=\"text-pink-500 hover:text-pink-400\">\n              Sign up\n            </Link>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","ReactServerDOMTurbopackClient"],"mappings":"+iBAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,gBAAgB,+BCFvCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,+BCFzCL,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,kBAAkB,8BCFzCN,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEI,6BAA6B,0CCFtD,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,KAOA,IAAM,EAAQ,EAAA,UAAgB,CAC5B,CAAC,CAAE,WAAS,MAAE,CAAI,MAAE,CAAI,CAAE,GAAG,EAAO,CAAE,IAElC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCACZ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0DACZ,IAGL,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAM,EACN,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,+TACA,GAAQ,QACR,GAEF,IAAK,EACJ,GAAG,CAAK,OAMnB,EAAM,WAAW,CAAG,sEC7BpB,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,KAIA,IAAM,EAAQ,EAAA,UAAgB,CAC5B,CAAC,WAAE,CAAS,CAAE,GAAG,EAAO,CAAE,IAEtB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,IAAK,EACL,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACT,6FACA,GAED,GAAG,CAAK,IAMjB,EAAM,WAAW,CAAG,sECpBpB,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAkBe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,OAAE,CAAK,aAAE,CAAW,iBAAE,CAAe,WAAE,CAAS,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAC5D,CAAC,EAAO,EAAS,CAAG,EAAA,QAAc,CAAC,IACnC,CAAC,EAAU,EAAY,CAAG,EAAA,QAAc,CAAC,IACzC,CAAC,EAAO,EAAS,CAAG,EAAA,QAAc,CAAC,IACnC,CAAC,EAAc,EAAgB,CAAG,EAAA,QAAc,CAAC,IACjD,CAAC,EAAgB,EAAkB,CAAG,EAAA,QAAc,CAAgB,MACpE,CAAC,EAAiB,EAAmB,CAAG,EAAA,QAAc,EAAC,GACvD,CAAC,EAAoB,EAAsB,CAAG,EAAA,QAAc,EAAC,GAGnE,EAAA,SAAe,CAAC,KACV,CAAC,GAAa,GAChB,EAAO,IAAI,CAAC,OADqB,MAGrC,EAAG,CAAC,EAAiB,EAAW,EAAO,EAGvC,EAAA,SAAe,CAAC,MACd,AAaA,eAbe,EACb,GAAI,CACF,IAAM,EAAW,MAAM,MACrB,CAAA,EAAG,QAAQ,GAAG,CAAC,mBAAmB,EAAI,wBAAwB,mBAAmB,CAAC,EAE9E,EAAO,MAAM,EAAS,IAAI,EAC5B,GAAK,OAAO,EAAI,EAAK,IAAI,EAAE,UAAU,AACvC,EAAkB,EAAK,IAAI,CAAC,QAAQ,CAExC,CAAE,KAAM,CAER,CACF,GAEF,EAAG,EAAE,EAGL,EAAA,SAAe,CAAC,KACd,GAAI,CAAC,EAAgB,OAErB,IAAM,EAAS,SAAS,aAAa,CAAC,UAatC,OAZA,EAAO,GAAG,CAAG,yCACb,EAAO,KAAK,EAAG,EACf,EAAO,KAAK,CAAG,GACf,EAAO,MAAM,CAAG,KACd,GAAsB,GACtB,OAAO,MAAM,EAAE,SAAS,GAAG,WAAW,CACpC,UAAW,EACX,SAAU,CACZ,EACF,EACA,SAAS,IAAI,CAAC,WAAW,CAAC,GAEnB,KACD,SAAS,IAAI,CAAC,QAAQ,CAAC,IACzB,KADkC,IACzB,IAAI,CAAC,WAAW,CAAC,EAE9B,CACF,EAAG,CAAC,EAAe,EAEnB,IAAM,EAAuB,MAAO,IAClC,GAAmB,GACnB,EAAS,IACT,IAAM,EAAS,MAAM,EAAY,EAAS,UAAU,CAChD,GAAO,OAAO,CAChB,CADkB,CACX,IAAI,CAAC,cAEZ,EAAS,EAAO,KAAK,EAAI,uBAE3B,GAAmB,EACrB,EAiBM,EAAe,MAAO,IAC1B,EAAE,cAAc,GAChB,GAAgB,GAChB,EAAS,IAET,IAAM,EAAS,MAAM,EAAM,EAAO,GAC9B,EAAO,OAAO,CAChB,CADkB,CACX,IAAI,CAAC,cAEZ,EAAS,EAAO,KAAK,EAAI,gBAE3B,GAAgB,EAClB,SAEA,AAAI,EAEA,CAAA,EAAA,EAAA,GAAA,CAFW,CAEV,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mEAMnB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,IAAI,UAAU,8DACvB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oBAAW,MAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,mBAER,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kDAAyC,iBAGvD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uDAA8C,2CAK7D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACZ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sFACZ,IAKL,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,KAAK,SACL,QA/DgB,CA+DP,IA9DjB,AAAK,EAID,EAJA,CAIsB,OAAO,IAJZ,EAIkB,EAAE,AACvC,GAAmB,GACnB,OAAO,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,GAEhC,WAAW,IAAM,GAAmB,GAAQ,MAE5C,EAAS,gDATT,EAAS,kFAWb,EAmDU,SAAU,GAAmB,EAC7B,UAAU,uNAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,MAAM,uCACpD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,2IAA2I,KAAK,YACxJ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,yJAAyJ,KAAK,YACtK,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,oJAAoJ,KAAK,YACjK,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,2JAA2J,KAAK,eAEzK,EAAkB,gBAAkB,0BAGvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6CAElB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0DACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sEAA6D,gCAMjF,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAc,UAAU,sBACtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,iBAAQ,UACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,QACH,KAAK,QACL,YAAY,kBACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,QAAQ,CAAA,CAAA,EACR,SAAU,OAId,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,oBAAW,aAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,mBACL,UAAU,qDACX,wBAIH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,WACH,KAAK,WACL,YAAY,WACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,QAAQ,CAAA,CAAA,EACR,SAAU,OAId,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,UAAU,8FACV,SAAU,WAET,EAAe,gBAAkB,eAItC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,+DAAqD,yBACpC,IAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,YAAY,UAAU,6CAAoC,sBAQjF","ignoreList":[0,1,2,3]}